eps = 0.01;

module logo()
{
    // Module names are of the form poly_<inkscape-path-id>().
    // As a result you can associate a polygon in this OpenSCAD program with the
    //  corresponding SVG element in the Inkscape document by looking for 
    //  the XML element with the attribute id="inkscape-path-id".

    // Paths have their own variables so they can be imported and used 
    //  in polygon(points) structures in other programs.
    // The NN_points is the list of all polygon XY vertices. 
    // There may be an NN_paths variable as well. If it exists then it 
    //  defines the nested paths. Both must be used in the 
    //  polygon(points, paths) variant of the command.

    profile_scale = 25.4/90; //made in inkscape in mm

    // helper functions to determine the X,Y dimensions of the profiles
    function min_x(shape_points) = min([ for (x = shape_points) min(x[0])]);
    function max_x(shape_points) = max([ for (x = shape_points) max(x[0])]);
    function min_y(shape_points) = min([ for (x = shape_points) min(x[1])]);
    function max_y(shape_points) = max([ for (x = shape_points) max(x[1])]);

    height = 2;
    width = 1.0;


    path4506_0_points = [[-275.670758,315.599620],[-287.720498,232.400380],[-272.155208,232.126730],[-256.589928,231.853090],[-225.355478,169.374620],[-213.227725,145.076501],[-203.296146,125.104371],[-196.585620,111.524486],[-194.758527,107.777340],[-194.283071,106.777464],[-194.121028,106.403100],[-194.250906,106.377493],[-194.636297,106.351552],[-196.148160,106.298855],[-198.605694,106.245392],[-201.957979,106.191548],[-211.143118,106.084248],[-223.296211,105.980023],[-238.009892,105.881938],[-254.876795,105.793063],[-273.489552,105.716465],[-293.440798,105.655210],[-392.760573,105.400380],[-267.260418,-146.349620],[-242.037533,-196.920885],[-218.482534,-244.099425],[-197.112692,-286.852672],[-178.445275,-324.148057],[-162.997553,-354.953014],[-151.286794,-378.234972],[-146.994423,-386.732149],[-143.830270,-392.961363],[-141.858991,-396.793544],[-141.340886,-397.770412],[-141.145248,-398.099620],[-141.022246,-397.920468],[-140.719682,-397.388866],[-139.593952,-395.303429],[-137.804237,-391.913548],[-135.386718,-387.289464],[-128.812987,-374.619640],[-120.162198,-357.855870],[-109.723788,-337.560069],[-97.787199,-314.294151],[-84.641869,-288.620030],[-70.577238,-261.099620],[-56.514921,-233.579519],[-43.376226,-207.906285],[-31.450126,-184.641769],[-21.025595,-164.347824],[-12.391608,-147.586301],[-5.837138,-134.919053],[-1.651160,-126.907932],[-0.536660,-124.823998],[-0.239835,-124.293164],[-0.122648,-124.114790],[-0.005553,-124.294669],[0.290993,-124.826954],[1.404400,-126.913620],[5.586171,-134.929494],[12.133988,-147.600485],[20.759171,-164.364667],[31.173042,-184.660115],[43.086922,-207.924902],[56.212132,-233.597102],[70.259992,-261.114790],[84.310249,-288.631382],[97.442323,-314.300454],[109.367056,-337.560308],[119.795287,-357.849247],[128.437857,-374.605573],[135.005604,-387.267590],[137.421057,-391.887702],[139.209370,-395.273600],[140.334396,-397.355072],[140.636882,-397.884707],[140.759993,-398.061906],[140.956084,-397.730487],[141.475129,-396.750887],[143.449702,-392.911741],[146.618952,-386.673667],[150.918121,-378.165864],[162.647183,-354.857869],[178.118820,-324.021349],[196.814965,-286.689900],[218.217550,-243.897114],[241.808509,-196.676586],[267.069773,-146.061910],[392.760573,105.900380],[293.319772,105.900380],[270.144509,105.916244],[250.007167,105.963726],[232.923811,106.042666],[218.910501,106.152901],[213.060133,106.219704],[207.983301,106.294269],[203.682010,106.376577],[200.158271,106.466608],[197.414089,106.564341],[195.451474,106.669756],[194.763881,106.725337],[194.272433,106.782832],[193.977379,106.842237],[193.903579,106.872655],[193.878972,106.903550],[193.919513,107.036044],[194.039808,107.327381],[194.511720,108.370433],[196.325191,112.185003],[199.192232,118.088863],[202.985687,125.823613],[207.578403,135.130855],[212.843224,145.752191],[218.652995,157.429222],[224.880562,169.903550],[255.882142,231.900380],[271.380562,231.900380],[275.408122,231.915365],[278.743257,231.962919],[281.434427,232.046937],[282.553669,232.103838],[283.530094,232.171316],[284.369758,232.249859],[285.078719,232.339954],[285.663034,232.442087],[286.128763,232.556746],[286.481961,232.684417],[286.618254,232.753285],[286.728687,232.825589],[286.814016,232.901389],[286.874998,232.980747],[286.912391,233.063724],[286.926952,233.150380],[286.914933,233.402346],[286.869087,233.879752],[286.680221,235.481519],[285.943911,241.067319],[284.786871,249.437945],[283.277949,260.123560],[281.485995,272.654327],[279.479856,286.560411],[275.100420,316.619183],[270.690430,346.541185],[268.646098,360.276308],[266.800674,372.567729],[265.223006,382.945613],[263.981942,390.940124],[263.509152,393.896790],[263.146332,396.081425],[262.902086,397.435298],[262.827119,397.782346],[262.785022,397.899680],[262.611127,397.629898],[262.152449,396.831827],[260.417548,393.718882],[257.653928,388.696964],[253.935194,381.902194],[243.926815,363.538578],[230.981267,339.716995],[215.687406,311.526405],[198.634088,280.055769],[161.604500,211.630201],[124.603349,143.151979],[107.585577,111.615523],[92.341481,83.332787],[79.459917,59.392729],[69.529741,40.884312],[65.855440,34.007268],[63.139807,28.896495],[61.456449,25.688112],[61.024875,24.839855],[60.878972,24.518240],[60.912947,24.502357],[61.014317,24.486569],[61.415929,24.455301],[62.991424,24.394126],[65.552392,24.335033],[69.045769,24.278338],[78.617498,24.173410],[91.282098,24.081878],[106.615056,24.006274],[124.191863,23.949133],[143.588006,23.912991],[164.378972,23.900380],[192.415365,23.887369],[215.210803,23.844610],[233.227794,23.766514],[240.588905,23.712468],[246.928844,23.647492],[252.305424,23.570888],[256.776460,23.481957],[260.399763,23.380000],[263.233149,23.264319],[265.334429,23.134215],[266.128596,23.063536],[266.761417,22.988990],[267.240119,22.910488],[267.571927,22.827944],[267.685005,22.785129],[267.764070,22.741271],[267.810024,22.696358],[267.823772,22.650380],[267.739501,22.423614],[267.495049,21.877590],[266.541582,19.859982],[264.995330,16.661985],[262.888250,12.348025],[257.119436,0.629925],[249.490799,-14.778901],[240.257999,-33.363037],[229.676695,-54.607064],[218.002546,-77.995568],[205.491212,-103.013130],[143.213852,-227.426640],[128.747632,-199.513130],[57.396722,-61.849620],[45.955455,-39.803160],[35.254052,-19.235753],[25.528710,-0.597545],[17.015625,15.661317],[9.950993,29.090688],[4.571012,39.240419],[2.586576,42.944750],[1.111876,45.660365],[0.176437,47.330998],[-0.079834,47.756862],[-0.190218,47.900380],[-0.319397,47.720545],[-0.631442,47.186915],[-1.785681,45.093523],[-3.616038,41.690713],[-6.085622,37.048991],[-12.794892,24.330841],[-21.618337,7.503131],[-32.260809,-12.870081],[-44.427155,-36.224739],[-57.822225,-61.996785],[-72.150868,-89.622160],[-86.473974,-117.238742],[-99.853177,-142.985578],[-111.994438,-166.300378],[-122.603719,-186.620854],[-131.386981,-203.384714],[-138.050185,-216.029670],[-140.494879,-220.631843],[-142.299294,-223.993432],[-143.426675,-226.044150],[-143.724992,-226.555967],[-143.805797,-226.679647],[-143.840268,-226.713710],[-144.207757,-226.020833],[-145.199866,-224.073996],[-148.929147,-216.675861],[-162.466398,-189.663681],[-182.391301,-149.795881],[-206.643138,-101.191170],[-269.015008,23.900380],[-164.961028,23.900380],[-136.710852,23.913274],[-113.776273,23.955748],[-95.685956,24.033492],[-88.310102,24.087368],[-81.968563,24.152195],[-76.602420,24.228684],[-72.152757,24.317546],[-68.560658,24.419492],[-65.767204,24.535234],[-64.651558,24.598501],[-63.713479,24.665483],[-62.945604,24.736269],[-62.340566,24.810949],[-61.891003,24.889611],[-61.589548,24.972345],[-61.492060,25.015266],[-61.428838,25.059238],[-61.398960,25.104272],[-61.401508,25.150380],[-62.054107,26.411526],[-63.800289,29.692932],[-70.281653,41.776641],[-80.262109,60.321740],[-93.158168,84.248459],[-125.363130,143.927682],[-162.228620,212.176160],[-199.086716,280.355743],[-231.269496,339.828281],[-244.148918,363.599986],[-254.109040,381.955624],[-260.566374,393.815424],[-262.299154,396.971958],[-262.937428,398.099620],[-262.958956,398.090284],[-262.988225,398.026664],[-263.069578,397.739213],[-263.320685,396.541972],[-263.684221,394.550196],[-264.153656,391.806181],[-264.722463,388.352224],[-265.384112,384.230624],[-266.959829,374.153680],[-268.828578,361.913729],[-270.938134,347.849149],[-273.236269,332.298320],[-275.670758,315.599620],[-275.670758,315.599620]];

    module poly_path4506(h, w, res=4)  {
      scale([profile_scale, -profile_scale, 1])
      union()  {
        linear_extrude(height=h)
          polygon(path4506_0_points);
      }
    }

    // The shapes
    poly_path4506(height, width);


}





module text_and_logo()
{
    translate([0,0,-eps]) scale([0.225,0.225,1+2*eps]) logo();
    //translate([0,0,-0.01])cylinder(d=91,h=2.04);
    step_angle = len("Если не мы")+1;
    translate([0,0,-eps]) text_arch(32,"Если не мы",step_angle);
    translate([0,0,-eps]) text_arch_inv(32,"то кто?",step_angle);
    
    translate([0,0,-eps])
    difference()
    {
        cylinder(d=92,h=2);
        translate([0,0,-eps])
            cylinder(d=89,h=2+2*eps);
    }
}

module coaster()
{
    /*
    color([0.2,0.2,0.2])
    translate([0,0,0])
    difference()
    {
        cylinder(d=95, h=4);
        translate([0,0,2]) text_and_logo(h=2);
        
    }
    */
    
    translate([0,0,2])
        color("red")
            text_and_logo();

    
}

module text_arch(radius, chars, chars_len)
{
    PI = 3.14159;
    circumference = 2*PI * radius;
    //chars_len = len(chars)+1;
    off = 5;
    font_size = 11;
    step_angle = 180 / chars_len;
    for(i = [0 : chars_len - 1]) 
    {
        tmp_off = i==chars_len-2 ? -off : 0;
        rotate(-(i-chars_len/2) * step_angle  - step_angle+off+tmp_off) 
            translate([0, radius + font_size / 2, 0]) 
                linear_extrude(height = 2.02) {
                    text(
                        chars[i], 
                        font = "Arial:style=Bold", 
                        size = font_size, 
                        valign = "center", halign = "center"
                    );
            }
    }
}

module text_arch_inv(radius, chars, chars_len)
{
    PI = 3.14159;
    circumference = 2*PI * radius;
    //chars_len = len(chars)+1;
    font_size = 11;
    step_angle = 180 / chars_len;
    for(i = [0 : chars_len - 1]) 
    {
        rotate((i-len(chars)/2) * step_angle + 180 + 0.5*step_angle) 
            translate([0, radius + font_size / 2, 0])
                rotate(180)
                linear_extrude(height = 2.02) {
                    text(
                        chars[i], 
                        font = "Arial:style=Bold", 
                        size = font_size, 
                        valign = "center", halign = "center"
                    );
            }
    }
}



$fn=250;
coaster();

